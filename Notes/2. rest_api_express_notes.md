
# REST API Design + Express.js (Interview Notes)

## 1. REST API Design Principles

### ✅ REST Basics
- **REST** = Representational State Transfer
- Based on **stateless, client-server, cacheable communication** (usually over HTTP)
- Resources are identified by **URIs** and manipulated using **standard HTTP methods**

### ✅ HTTP Methods & Usage
- **GET** → Retrieve data (safe, idempotent)
- **POST** → Create new resource (non-idempotent)
- **PUT** → Update/replace resource (idempotent)
- **PATCH** → Partial update of a resource
- **DELETE** → Remove a resource

### ✅ Best Practices
1. **Use Nouns for Endpoints**
   ```
   /users (GET → list users, POST → create user)
   /users/{id} (GET → fetch user, PUT/PATCH → update user, DELETE → remove user)
   ```
2. **Statelessness** → Every request contains all necessary info (auth token, parameters)
3. **Versioning** → `/api/v1/users` (ensures backward compatibility)
4. **Error Handling**
   - Use proper HTTP status codes (200, 201, 400, 401, 404, 500)
   - Return error messages in JSON format
   ```json
   {
     "error": "Invalid request",
     "details": "User ID must be numeric"
   }
   ```
5. **Pagination, Filtering, Sorting**
   ```
   GET /users?page=2&limit=10&sort=createdAt&order=desc
   ```
6. **Security**
   - Use HTTPS
   - Authentication → JWT, OAuth
   - Validate inputs to prevent SQL Injection / XSS
   - Rate limiting & CORS

---

## 2. Express.js Overview

### ✅ What is Express?
- A **minimal and flexible Node.js framework** for building APIs & web apps
- Provides routing, middleware support, and easy integration with databases

### ✅ Express App Structure
```js
const express = require('express');
const app = express();
const PORT = 3000;

// Middleware
app.use(express.json());

// Routes
app.get('/api/v1/users', (req, res) => {
  res.json([{ id: 1, name: "Alice" }]);
});

app.post('/api/v1/users', (req, res) => {
  const newUser = req.body;
  res.status(201).json(newUser);
});

// Start server
app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
```

---

## 3. Middleware in Express

Middleware functions are functions that execute during the request/response cycle.

### ✅ Types
1. **Application-level** (e.g., `app.use()`)
2. **Router-level** (e.g., `express.Router()`)
3. **Built-in** (e.g., `express.json()`)
4. **Error-handling**

### Example:
```js
// Logger middleware
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url}`);
  next();
});

// Error handling middleware
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({ error: 'Something broke!' });
});
```

---

## 4. REST API with Express Example

### User Routes (CRUD)
```js
const express = require('express');
const app = express();
app.use(express.json());

let users = [{ id: 1, name: 'Alice' }];

// GET all users
app.get('/users', (req, res) => res.json(users));

// GET user by id
app.get('/users/:id', (req, res) => {
  const user = users.find(u => u.id === parseInt(req.params.id));
  if (!user) return res.status(404).json({ error: 'User not found' });
  res.json(user);
});

// POST new user
app.post('/users', (req, res) => {
  const user = { id: users.length + 1, ...req.body };
  users.push(user);
  res.status(201).json(user);
});

// PUT update user
app.put('/users/:id', (req, res) => {
  const user = users.find(u => u.id === parseInt(req.params.id));
  if (!user) return res.status(404).json({ error: 'User not found' });
  user.name = req.body.name;
  res.json(user);
});

// DELETE user
app.delete('/users/:id', (req, res) => {
  users = users.filter(u => u.id !== parseInt(req.params.id));
  res.status(204).send();
});

app.listen(3000, () => console.log('Server running on port 3000'));
```

---

## 5. Quick Recap

- REST APIs follow **stateless, resource-based design** with standard HTTP methods  
- Use **proper status codes, pagination, error handling, versioning**  
- Express.js provides **routing, middleware, JSON handling**  
- Secure APIs with **HTTPS, JWT/OAuth, input validation, rate limiting**  
